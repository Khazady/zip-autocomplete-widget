import{r as c,j as h,a as oe,R as jt,d as Z}from"./index-D8p6PEGz.js";const ae=t=>c.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},c.createElement("path",{d:"M21 8H3",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),c.createElement("path",{d:"M17.5 13a4.5 4.5 0 1 1 0 9 4.5 4.5 0 0 1 0-9",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),c.createElement("path",{d:"M14.67 21H6a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v8.67",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),c.createElement("path",{d:"M17.4 15.98v1.76l1.38.85",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),c.createElement("path",{d:"M13.75 11.45a.05.05 0 1 0 0 .1.05.05 0 0 0 0-.1",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),c.createElement("path",{d:"M10.25 11.45a.1.1 0 0 0-.05.05.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),c.createElement("path",{d:"M6.75 11.45a.1.1 0 0 0-.05.05.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),c.createElement("path",{d:"M10.25 14.45a.1.1 0 0 0-.05.05.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),c.createElement("path",{d:"M6.75 14.45a.1.1 0 0 0-.05.05.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),c.createElement("path",{d:"M10.25 17.45q-.02 0-.04.02l-.01.03a.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),c.createElement("path",{d:"M6.75 17.45a.1.1 0 0 0-.05.05.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"})),ce=t=>c.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},c.createElement("path",{d:"m4.45 4.45 7.07 7.07",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),c.createElement("path",{d:"m11.52 4.45-7.07 7.07",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"})),ue="_floatingWidget_nb6br_1",le="_floatingWidgetDismissing_nb6br_6",de="_widgetPosition_nb6br_11",fe="_widgetShell_nb6br_17",ge="_widgetLauncher_nb6br_22",pe="_widgetLauncherHidden_nb6br_45",he="_widgetPanel_nb6br_51",we="_widgetPanelOpen_nb6br_70",me="_widgetClose_nb6br_76",Ee="_widgetHeader_nb6br_86",_e="_widgetInputRow_nb6br_92",Re="_widgetInputWrapper_nb6br_98",be="_widgetInput_nb6br_92",Se="_inputSpinner_nb6br_119",ve="_widgetError_nb6br_130",Le="_widgetErrorVisible_nb6br_141",Ce="_widgetButton_nb6br_145",ye="_widgetResults_nb6br_155",Oe="_widgetResultsVisible_nb6br_173",ke="_widgetList_nb6br_197",je="_widgetItemButton_nb6br_206",xe="_widgetEmpty_nb6br_219",R={floatingWidget:ue,floatingWidgetDismissing:le,widgetPosition:de,widgetShell:fe,widgetLauncher:ge,widgetLauncherHidden:pe,widgetPanel:he,widgetPanelOpen:we,widgetClose:me,widgetHeader:Ee,widgetInputRow:_e,widgetInputWrapper:Re,widgetInput:be,inputSpinner:Se,widgetError:ve,widgetErrorVisible:Le,widgetButton:Ce,widgetResults:ye,widgetResultsVisible:Oe,widgetList:ke,widgetItemButton:je,widgetEmpty:xe},De="_spinner_1l9n9_1",Ie={spinner:De},et=(...t)=>t.filter(Boolean).join(" "),Te=({className:t})=>h.jsx("span",{className:et(Ie.spinner,t)}),We="/zip-autocomplete-widget/mocked-data.json",Ne=async()=>{await new Promise(e=>{setTimeout(e,1e3)});const t=await fetch(We);if(!t.ok)throw new Error("Failed to fetch zip data");return await t.json()},Ae=t=>t.trim().toLowerCase(),Ve=(t,e)=>{const n=Ae(e);return n?t.filter(i=>{const s=i.zip.startsWith(n),a=i.city.toLowerCase().includes(n);return s||a}).slice(0,6).map((i,s)=>({...i,id:`${i.zip}-${i.city}-${s}`,label:i.hideCityName?i.zip:`${i.zip} ${i.city}`})):[]};var gt={exports:{}},pt={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qt;function Pe(){if(qt)return pt;qt=1;var t=oe();function e(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,a=t.useDebugValue;function p(u,d){var f=d(),C=r({inst:{value:f,getSnapshot:d}}),g=C[0].inst,V=C[1];return s(function(){g.value=f,g.getSnapshot=d,w(g)&&V({inst:g})},[u,f,d]),i(function(){return w(g)&&V({inst:g}),u(function(){w(g)&&V({inst:g})})},[u]),a(f),f}function w(u){var d=u.getSnapshot;u=u.value;try{var f=d();return!n(u,f)}catch{return!0}}function L(u,d){return d()}var _=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?L:p;return pt.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:_,pt}var Ht;function Me(){return Ht||(Ht=1,gt.exports=Pe()),gt.exports}var Fe=Me();const Gt=0,Jt=1,Kt=2,Ut=3;var Bt=Object.prototype.hasOwnProperty;function bt(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&bt(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(Bt.call(t,n)&&++r&&!Bt.call(e,n)||!(n in e)||!bt(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const F=new WeakMap,H=()=>{},j=H(),St=Object,l=t=>t===j,A=t=>typeof t=="function",U=(t,e)=>({...t,...e}),Qt=t=>A(t.then),ht={},ct={},xt="undefined",st=typeof window!=xt,vt=typeof document!=xt,qe=st&&"Deno"in window,He=()=>st&&typeof window.requestAnimationFrame!=xt,Yt=(t,e)=>{const n=F.get(t);return[()=>!l(e)&&t.get(e)||ht,r=>{if(!l(e)){const i=t.get(e);e in ct||(ct[e]=i),n[5](e,U(i,r),i||ht)}},n[6],()=>!l(e)&&e in ct?ct[e]:!l(e)&&t.get(e)||ht]};let Lt=!0;const Ue=()=>Lt,[Ct,yt]=st&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[H,H],Be=()=>{const t=vt&&document.visibilityState;return l(t)||t!=="hidden"},$e=t=>(vt&&document.addEventListener("visibilitychange",t),Ct("focus",t),()=>{vt&&document.removeEventListener("visibilitychange",t),yt("focus",t)}),ze=t=>{const e=()=>{Lt=!0,t()},n=()=>{Lt=!1};return Ct("online",e),Ct("offline",n),()=>{yt("online",e),yt("offline",n)}},Ze={isOnline:Ue,isVisible:Be},Ge={initFocus:$e,initReconnect:ze},$t=!jt.useId,rt=!st||qe,Je=t=>He()?window.requestAnimationFrame(t):setTimeout(t,1),wt=rt?c.useEffect:c.useLayoutEffect,mt=typeof navigator<"u"&&navigator.connection,zt=!rt&&mt&&(["slow-2g","2g"].includes(mt.effectiveType)||mt.saveData),ut=new WeakMap,Et=(t,e)=>St.prototype.toString.call(t)===`[object ${e}]`;let Ke=0;const Ot=t=>{const e=typeof t,n=Et(t,"Date"),r=Et(t,"RegExp"),i=Et(t,"Object");let s,a;if(St(t)===t&&!n&&!r){if(s=ut.get(t),s)return s;if(s=++Ke+"~",ut.set(t,s),Array.isArray(t)){for(s="@",a=0;a<t.length;a++)s+=Ot(t[a])+",";ut.set(t,s)}if(i){s="#";const p=St.keys(t).sort();for(;!l(a=p.pop());)l(t[a])||(s+=a+":"+Ot(t[a])+",");ut.set(t,s)}}else s=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return s},Dt=t=>{if(A(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Ot(t):"",[t,e]};let Qe=0;const kt=()=>++Qe;async function Xt(...t){const[e,n,r,i]=t,s=U({populateCache:!0,throwOnError:!0},typeof i=="boolean"?{revalidate:i}:i||{});let a=s.populateCache;const p=s.rollbackOnError;let w=s.optimisticData;const L=d=>typeof p=="function"?p(d):p!==!1,_=s.throwOnError;if(A(n)){const d=n,f=[],C=e.keys();for(const g of C)!/^\$(inf|sub)\$/.test(g)&&d(e.get(g)._k)&&f.push(g);return Promise.all(f.map(u))}return u(n);async function u(d){const[f]=Dt(d);if(!f)return;const[C,g]=Yt(e,f),[V,o,B,q]=F.get(e),x=()=>{const T=V[f];return(A(s.revalidate)?s.revalidate(C().data,d):s.revalidate!==!1)&&(delete B[f],delete q[f],T&&T[0])?T[0](Kt).then(()=>C().data):C().data};if(t.length<3)return x();let y=r,D;const G=kt();o[f]=[G,0];const b=!l(w),J=C(),N=J.data,K=J._c,$=l(K)?N:K;if(b&&(w=A(w)?w($,N):w,g({data:w,_c:$})),A(y))try{y=y($)}catch(T){D=T}if(y&&Qt(y))if(y=await y.catch(T=>{D=T}),G!==o[f][0]){if(D)throw D;return y}else D&&b&&L(D)&&(a=!0,g({data:$,_c:j}));if(a&&!D)if(A(a)){const T=a(y,$);g({data:T,error:j,_c:j})}else g({data:y,error:j,_c:j});if(o[f][1]=kt(),Promise.resolve(x()).then(()=>{g({_c:j})}),D){if(_)throw D;return}return y}}const Zt=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},Ye=(t,e)=>{if(!F.has(t)){const n=U(Ge,e),r=Object.create(null),i=Xt.bind(j,t);let s=H;const a=Object.create(null),p=(_,u)=>{const d=a[_]||[];return a[_]=d,d.push(u),()=>d.splice(d.indexOf(u),1)},w=(_,u,d)=>{t.set(_,u);const f=a[_];if(f)for(const C of f)C(u,d)},L=()=>{if(!F.has(t)&&(F.set(t,[r,Object.create(null),Object.create(null),Object.create(null),i,w,p]),!rt)){const _=n.initFocus(setTimeout.bind(j,Zt.bind(j,r,Gt))),u=n.initReconnect(setTimeout.bind(j,Zt.bind(j,r,Jt)));s=()=>{_&&_(),u&&u(),F.delete(t)}}};return L(),[t,i,L,s]}return[t,F.get(t)[4]]},Xe=(t,e,n,r,i)=>{const s=n.errorRetryCount,a=i.retryCount,p=~~((Math.random()+.5)*(1<<(a<8?a:8)))*n.errorRetryInterval;!l(s)&&a>s||setTimeout(r,p,i)},tn=bt,[te,en]=Ye(new Map),nn=U({onLoadingSlow:H,onSuccess:H,onError:H,onErrorRetry:Xe,onDiscarded:H,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:zt?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:zt?5e3:3e3,compare:tn,isPaused:()=>!1,cache:te,mutate:en,fallback:{}},Ze),rn=(t,e)=>{const n=U(t,e);if(e){const{use:r,fallback:i}=t,{use:s,fallback:a}=e;r&&s&&(n.use=r.concat(s)),i&&a&&(n.fallback=U(i,a))}return n},sn=c.createContext({}),on="$inf$",ee=st&&window.__SWR_DEVTOOLS_USE__,an=ee?window.__SWR_DEVTOOLS_USE__:[],cn=()=>{ee&&(window.__SWR_DEVTOOLS_REACT__=jt)},un=t=>A(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],ln=()=>U(nn,c.useContext(sn)),dn=t=>(e,n,r)=>t(e,n&&((...s)=>{const[a]=Dt(e),[,,,p]=F.get(te);if(a.startsWith(on))return n(...s);const w=p[a];return l(w)?n(...s):(delete p[a],w)}),r),fn=an.concat(dn),gn=t=>function(...n){const r=ln(),[i,s,a]=un(n),p=rn(r,a);let w=t;const{use:L}=p,_=(L||[]).concat(fn);for(let u=_.length;u--;)w=_[u](w);return w(i,s||p.fetcher||null,p)},pn=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i>=0&&(r[i]=r[r.length-1],r.pop())}};cn();const _t=jt.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),Rt={dedupe:!0},hn=(t,e,n)=>{const{cache:r,compare:i,suspense:s,fallbackData:a,revalidateOnMount:p,revalidateIfStale:w,refreshInterval:L,refreshWhenHidden:_,refreshWhenOffline:u,keepPreviousData:d}=n,[f,C,g,V]=F.get(r),[o,B]=Dt(t),q=c.useRef(!1),x=c.useRef(!1),y=c.useRef(o),D=c.useRef(e),G=c.useRef(n),b=()=>G.current,J=()=>b().isVisible()&&b().isOnline(),[N,K,$,T]=Yt(r,o),Q=c.useRef({}).current,it=l(a)?l(n.fallback)?j:n.fallback[o]:a,It=(E,m)=>{for(const O in Q){const S=O;if(S==="data"){if(!i(E[S],m[S])&&(!l(E[S])||!i(at,m[S])))return!1}else if(m[S]!==E[S])return!1}return!0},Tt=c.useMemo(()=>{const E=!o||!e?!1:l(p)?b().isPaused()||s?!1:w!==!1:p,m=k=>{const P=U(k);return delete P._k,E?{isValidating:!0,isLoading:!0,...P}:P},O=N(),S=T(),W=m(O),tt=O===S?W:m(S);let v=W;return[()=>{const k=m(N());return It(k,v)?(v.data=k.data,v.isLoading=k.isLoading,v.isValidating=k.isValidating,v.error=k.error,v):(v=k,k)},()=>tt]},[r,o]),Y=Fe.useSyncExternalStore(c.useCallback(E=>$(o,(m,O)=>{It(O,m)||E()}),[r,o]),Tt[0],Tt[1]),Wt=!q.current,ne=f[o]&&f[o].length>0,X=Y.data,z=l(X)?it&&Qt(it)?_t(it):it:X,ot=Y.error,lt=c.useRef(z),at=d?l(X)?l(lt.current)?z:lt.current:X:z,Nt=ne&&!l(ot)?!1:Wt&&!l(p)?p:b().isPaused()?!1:s?l(z)?!1:w:l(z)||w,At=!!(o&&e&&Wt&&Nt),re=l(Y.isValidating)?At:Y.isValidating,se=l(Y.isLoading)?At:Y.isLoading,nt=c.useCallback(async E=>{const m=D.current;if(!o||!m||x.current||b().isPaused())return!1;let O,S,W=!0;const tt=E||{},v=!g[o]||!tt.dedupe,k=()=>$t?!x.current&&o===y.current&&q.current:o===y.current,P={isValidating:!1,isLoading:!1},Pt=()=>{K(P)},Mt=()=>{const I=g[o];I&&I[1]===S&&delete g[o]},Ft={isValidating:!0};l(N().data)&&(Ft.isLoading=!0);try{if(v&&(K(Ft),n.loadingTimeout&&l(N().data)&&setTimeout(()=>{W&&k()&&b().onLoadingSlow(o,n)},n.loadingTimeout),g[o]=[m(B),kt()]),[O,S]=g[o],O=await O,v&&setTimeout(Mt,n.dedupingInterval),!g[o]||g[o][1]!==S)return v&&k()&&b().onDiscarded(o),!1;P.error=j;const I=C[o];if(!l(I)&&(S<=I[0]||S<=I[1]||I[1]===0))return Pt(),v&&k()&&b().onDiscarded(o),!1;const M=N().data;P.data=i(M,O)?M:O,v&&k()&&b().onSuccess(O,o,n)}catch(I){Mt();const M=b(),{shouldRetryOnError:dt}=M;M.isPaused()||(P.error=I,v&&k()&&(M.onError(I,o,M),(dt===!0||A(dt)&&dt(I))&&(!b().revalidateOnFocus||!b().revalidateOnReconnect||J())&&M.onErrorRetry(I,o,M,ie=>{const ft=f[o];ft&&ft[0]&&ft[0](Ut,ie)},{retryCount:(tt.retryCount||0)+1,dedupe:!0})))}return W=!1,Pt(),!0},[o,r]),Vt=c.useCallback((...E)=>Xt(r,y.current,...E),[]);if(wt(()=>{D.current=e,G.current=n,l(X)||(lt.current=X)}),wt(()=>{if(!o)return;const E=nt.bind(j,Rt);let m=0;b().revalidateOnFocus&&(m=Date.now()+b().focusThrottleInterval);const S=pn(o,f,(W,tt={})=>{if(W==Gt){const v=Date.now();b().revalidateOnFocus&&v>m&&J()&&(m=v+b().focusThrottleInterval,E())}else if(W==Jt)b().revalidateOnReconnect&&J()&&E();else{if(W==Kt)return nt();if(W==Ut)return nt(tt)}});return x.current=!1,y.current=o,q.current=!0,K({_k:B}),Nt&&(l(z)||rt?E():Je(E)),()=>{x.current=!0,S()}},[o]),wt(()=>{let E;function m(){const S=A(L)?L(N().data):L;S&&E!==-1&&(E=setTimeout(O,S))}function O(){!N().error&&(_||b().isVisible())&&(u||b().isOnline())?nt(Rt).then(m):m()}return m(),()=>{E&&(clearTimeout(E),E=-1)}},[L,_,u,o]),c.useDebugValue(at),s&&l(z)&&o){if(!$t&&rt)throw new Error("Fallback data is required when using Suspense in SSR.");D.current=e,G.current=n,x.current=!1;const E=V[o];if(!l(E)){const m=Vt(E);_t(m)}if(l(ot)){const m=nt(Rt);l(at)||(m.status="fulfilled",m.value=!0),_t(m)}else throw ot}return{mutate:Vt,get data(){return Q.data=!0,at},get error(){return Q.error=!0,ot},get isValidating(){return Q.isValidating=!0,re},get isLoading(){return Q.isLoading=!0,se}}},wn=gn(hn),mn=(t,e)=>{const{data:n=[],isLoading:r,error:i}=wn(t?"zip-data":null,Ne);return{results:Ve(n,e),isLoading:r,error:i}},En=(t,e=!0)=>{c.useEffect(()=>{e&&t.current?.focus()},[e,t])},_n=(t,e,n=!0)=>{const r=c.useEffectEvent(i=>{const s=t.current;s&&i.target instanceof Node&&!s.contains(i.target)&&e()});c.useEffect(()=>{if(n)return document.addEventListener("pointerdown",r),()=>{document.removeEventListener("pointerdown",r)}},[r,n])},Sn=({onSelect:t,isDismissing:e})=>{const[n,r]=c.useState(!1),[i,s]=c.useState(""),[a,p]=c.useState(!1),w=c.useRef(null),L=c.useRef(null),{results:_,isLoading:u,error:d}=mn(n,i),f=()=>{r(!1),s(""),p(!1)},C=()=>{if(!i.trim()){p(!0);return}p(!1)},g=i.trim().length>0,V=g&&u,o=g&&!!d,B=g&&!u&&!d&&_.length===0,q=B||o||_.length>0;return En(w,n),_n(L,f,n),h.jsx("div",{className:et(R.floatingWidget,R.widgetPosition,e&&R.floatingWidgetDismissing),children:h.jsxs("div",{className:R.widgetShell,ref:L,children:[h.jsxs("button",{className:et(R.widgetLauncher,n&&R.widgetLauncherHidden),onClick:()=>r(!0),children:[h.jsx("span",{children:Z.widget.launcher}),h.jsx(ae,{width:24,height:24})]}),h.jsxs("div",{className:et(R.widgetPanel,n&&R.widgetPanelOpen),children:[h.jsx("button",{className:R.widgetClose,onClick:f,children:h.jsx(ce,{width:16,height:16})}),h.jsx("span",{className:R.widgetHeader,children:Z.widget.header}),h.jsxs("div",{className:R.widgetInputRow,children:[h.jsxs("div",{className:R.widgetInputWrapper,children:[h.jsx("input",{ref:w,className:R.widgetInput,placeholder:Z.widget.placeholder,value:i,onChange:x=>{s(x.target.value),a&&p(!1)}}),V&&h.jsx(Te,{className:R.inputSpinner}),h.jsx("p",{className:et(R.widgetError,a&&R.widgetErrorVisible),children:Z.widget.emptyFieldError}),h.jsx("div",{className:et(R.widgetResults,q&&R.widgetResultsVisible),children:q&&h.jsxs(h.Fragment,{children:[B&&h.jsx("div",{className:R.widgetEmpty,children:h.jsx("p",{children:Z.widget.empty})}),o&&h.jsx("div",{className:R.widgetEmpty,children:h.jsx("p",{children:Z.widget.error})}),_.length>0&&h.jsx("ul",{className:R.widgetList,children:_.map(x=>h.jsx("li",{children:h.jsx("button",{onClick:()=>t(x.zip),className:R.widgetItemButton,children:h.jsx("span",{children:x.label})})},x.id))})]})})]}),h.jsx("button",{className:R.widgetButton,onClick:C,children:Z.widget.buttonLabel})]})]})]})})};export{Sn as default};
