import{r as l,j as E,c as te,a as it,R as xe,d as Y,s as R}from"./index-CwlQWHBu.js";const at=e=>l.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M21 8H3",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M17.5 13a4.5 4.5 0 1 1 0 9 4.5 4.5 0 0 1 0-9",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M14.67 21H6a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v8.67",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M17.4 15.98v1.76l1.38.85",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M13.75 11.45a.05.05 0 1 0 0 .1.05.05 0 0 0 0-.1",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M10.25 11.45a.1.1 0 0 0-.05.05.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M6.75 11.45a.1.1 0 0 0-.05.05.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M10.25 14.45a.1.1 0 0 0-.05.05.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M6.75 14.45a.1.1 0 0 0-.05.05.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M10.25 17.45q-.02 0-.04.02l-.01.03a.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M6.75 17.45a.1.1 0 0 0-.05.05.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"})),ct=e=>l.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"m4.45 4.45 7.07 7.07",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"m11.52 4.45-7.07 7.07",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"})),ut="_spinner_1l9n9_1",lt={spinner:ut},dt=({className:e})=>E.jsx("span",{className:te(lt.spinner,e)}),ft="/zip-autocomplete-widget/mocked-data.json",ht=async()=>{await new Promise(t=>{setTimeout(t,1e3)});const e=await fetch(ft);if(!e.ok)throw new Error("Failed to fetch zip data");return await e.json()},pt=e=>e.trim().toLowerCase(),mt=(e,t)=>{const n=pt(t);return n?e.filter(o=>{const s=o.zip.startsWith(n),i=o.city.toLowerCase().includes(n);return s||i}).slice(0,6).map((o,s)=>({...o,id:`${o.zip}-${o.city}-${s}`,label:o.hideCityName?o.zip:`${o.zip} ${o.city}`})):[]};var he={exports:{}},pe={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qe;function wt(){if(qe)return pe;qe=1;var e=it();function t(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,o=e.useEffect,s=e.useLayoutEffect,i=e.useDebugValue;function p(c,f){var h=f(),O=r({inst:{value:h,getSnapshot:f}}),d=O[0].inst,U=O[1];return s(function(){d.value=h,d.getSnapshot=f,m(d)&&U({inst:d})},[c,h,f]),o(function(){return m(d)&&U({inst:d}),c(function(){m(d)&&U({inst:d})})},[c]),i(h),h}function m(c){var f=c.getSnapshot;c=c.value;try{var h=f();return!n(c,h)}catch{return!0}}function y(c,f){return f()}var C=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?y:p;return pe.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:C,pe}var Ue;function gt(){return Ue||(Ue=1,he.exports=wt()),he.exports}var Et=gt();const Ge=0,Je=1,Ke=2,$e=3;var ze=Object.prototype.hasOwnProperty;function Se(e,t){var n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Se(e[r],t[r]););return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(ze.call(e,n)&&++r&&!ze.call(t,n)||!(n in t)||!Se(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}const M=new WeakMap,P=()=>{},x=P(),Ce=Object,u=e=>e===x,A=e=>typeof e=="function",q=(e,t)=>({...e,...t}),Qe=e=>A(e.then),me={},ce={},De="undefined",re=typeof window!=De,Le=typeof document!=De,vt=re&&"Deno"in window,Rt=()=>re&&typeof window.requestAnimationFrame!=De,Ye=(e,t)=>{const n=M.get(e);return[()=>!u(t)&&e.get(t)||me,r=>{if(!u(t)){const o=e.get(t);t in ce||(ce[t]=o),n[5](t,q(o,r),o||me)}},n[6],()=>!u(t)&&t in ce?ce[t]:!u(t)&&e.get(t)||me]};let ye=!0;const St=()=>ye,[Oe,ke]=re&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[P,P],Ct=()=>{const e=Le&&document.visibilityState;return u(e)||e!=="hidden"},Lt=e=>(Le&&document.addEventListener("visibilitychange",e),Oe("focus",e),()=>{Le&&document.removeEventListener("visibilitychange",e),ke("focus",e)}),yt=e=>{const t=()=>{ye=!0,e()},n=()=>{ye=!1};return Oe("online",t),Oe("offline",n),()=>{ke("online",t),ke("offline",n)}},Ot={isOnline:St,isVisible:Ct},kt={initFocus:Lt,initReconnect:yt},He=!xe.useId,ne=!re||vt,jt=e=>Rt()?window.requestAnimationFrame(e):setTimeout(e,1),we=ne?l.useEffect:l.useLayoutEffect,ge=typeof navigator<"u"&&navigator.connection,Be=!ne&&ge&&(["slow-2g","2g"].includes(ge.effectiveType)||ge.saveData),ue=new WeakMap,Ee=(e,t)=>Ce.prototype.toString.call(e)===`[object ${t}]`;let _t=0;const je=e=>{const t=typeof e,n=Ee(e,"Date"),r=Ee(e,"RegExp"),o=Ee(e,"Object");let s,i;if(Ce(e)===e&&!n&&!r){if(s=ue.get(e),s)return s;if(s=++_t+"~",ue.set(e,s),Array.isArray(e)){for(s="@",i=0;i<e.length;i++)s+=je(e[i])+",";ue.set(e,s)}if(o){s="#";const p=Ce.keys(e).sort();for(;!u(i=p.pop());)u(e[i])||(s+=i+":"+je(e[i])+",");ue.set(e,s)}}else s=n?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return s},Te=e=>{if(A(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?je(e):"",[e,t]};let xt=0;const _e=()=>++xt;async function Xe(...e){const[t,n,r,o]=e,s=q({populateCache:!0,throwOnError:!0},typeof o=="boolean"?{revalidate:o}:o||{});let i=s.populateCache;const p=s.rollbackOnError;let m=s.optimisticData;const y=f=>typeof p=="function"?p(f):p!==!1,C=s.throwOnError;if(A(n)){const f=n,h=[],O=t.keys();for(const d of O)!/^\$(inf|sub)\$/.test(d)&&f(t.get(d)._k)&&h.push(d);return Promise.all(h.map(c))}return c(n);async function c(f){const[h]=Te(f);if(!h)return;const[O,d]=Ye(t,h),[U,a,se,X]=M.get(t),F=()=>{const b=U[h];return(A(s.revalidate)?s.revalidate(O().data,f):s.revalidate!==!1)&&(delete se[h],delete X[h],b&&b[0])?b[0](Ke).then(()=>O().data):O().data};if(e.length<3)return F();let k=r,D;const H=_e();a[h]=[H,0];const v=!u(m),B=O(),N=B.data,Z=B._c,$=u(Z)?N:Z;if(v&&(m=A(m)?m($,N):m,d({data:m,_c:$})),A(k))try{k=k($)}catch(b){D=b}if(k&&Qe(k))if(k=await k.catch(b=>{D=b}),H!==a[h][0]){if(D)throw D;return k}else D&&v&&y(D)&&(i=!0,d({data:$,_c:x}));if(i&&!D)if(A(i)){const b=i(k,$);d({data:b,error:x,_c:x})}else d({data:k,error:x,_c:x});if(a[h][1]=_e(),Promise.resolve(F()).then(()=>{d({_c:x})}),D){if(C)throw D;return}return k}}const Ze=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},Dt=(e,t)=>{if(!M.has(e)){const n=q(kt,t),r=Object.create(null),o=Xe.bind(x,e);let s=P;const i=Object.create(null),p=(C,c)=>{const f=i[C]||[];return i[C]=f,f.push(c),()=>f.splice(f.indexOf(c),1)},m=(C,c,f)=>{e.set(C,c);const h=i[C];if(h)for(const O of h)O(c,f)},y=()=>{if(!M.has(e)&&(M.set(e,[r,Object.create(null),Object.create(null),Object.create(null),o,m,p]),!ne)){const C=n.initFocus(setTimeout.bind(x,Ze.bind(x,r,Ge))),c=n.initReconnect(setTimeout.bind(x,Ze.bind(x,r,Je)));s=()=>{C&&C(),c&&c(),M.delete(e)}}};return y(),[e,o,y,s]}return[e,M.get(e)[4]]},Tt=(e,t,n,r,o)=>{const s=n.errorRetryCount,i=o.retryCount,p=~~((Math.random()+.5)*(1<<(i<8?i:8)))*n.errorRetryInterval;!u(s)&&i>s||setTimeout(r,p,o)},bt=Se,[et,It]=Dt(new Map),Nt=q({onLoadingSlow:P,onSuccess:P,onError:P,onErrorRetry:Tt,onDiscarded:P,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Be?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Be?5e3:3e3,compare:bt,isPaused:()=>!1,cache:et,mutate:It,fallback:{}},Ot),At=(e,t)=>{const n=q(e,t);if(t){const{use:r,fallback:o}=e,{use:s,fallback:i}=t;r&&s&&(n.use=r.concat(s)),o&&i&&(n.fallback=q(o,i))}return n},Wt=l.createContext({}),Vt="$inf$",tt=re&&window.__SWR_DEVTOOLS_USE__,Mt=tt?window.__SWR_DEVTOOLS_USE__:[],Ft=()=>{tt&&(window.__SWR_DEVTOOLS_REACT__=xe)},Pt=e=>A(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],qt=()=>q(Nt,l.useContext(Wt)),Ut=e=>(t,n,r)=>e(t,n&&((...s)=>{const[i]=Te(t),[,,,p]=M.get(et);if(i.startsWith(Vt))return n(...s);const m=p[i];return u(m)?n(...s):(delete p[i],m)}),r),$t=Mt.concat(Ut),zt=e=>function(...n){const r=qt(),[o,s,i]=Pt(n),p=At(r,i);let m=e;const{use:y}=p,C=(y||[]).concat($t);for(let c=C.length;c--;)m=C[c](m);return m(o,s||p.fetcher||null,p)},Ht=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o>=0&&(r[o]=r[r.length-1],r.pop())}};Ft();const ve=xe.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),Re={dedupe:!0},Bt=(e,t,n)=>{const{cache:r,compare:o,suspense:s,fallbackData:i,revalidateOnMount:p,revalidateIfStale:m,refreshInterval:y,refreshWhenHidden:C,refreshWhenOffline:c,keepPreviousData:f}=n,[h,O,d,U]=M.get(r),[a,se]=Te(e),X=l.useRef(!1),F=l.useRef(!1),k=l.useRef(a),D=l.useRef(t),H=l.useRef(n),v=()=>H.current,B=()=>v().isVisible()&&v().isOnline(),[N,Z,$,b]=Ye(r,a),G=l.useRef({}).current,oe=u(i)?u(n.fallback)?x:n.fallback[a]:i,be=(g,w)=>{for(const j in G){const S=j;if(S==="data"){if(!o(g[S],w[S])&&(!u(g[S])||!o(ae,w[S])))return!1}else if(w[S]!==g[S])return!1}return!0},Ie=l.useMemo(()=>{const g=!a||!t?!1:u(p)?v().isPaused()||s?!1:m!==!1:p,w=_=>{const W=q(_);return delete W._k,g?{isValidating:!0,isLoading:!0,...W}:W},j=N(),S=b(),I=w(j),Q=j===S?I:w(S);let L=I;return[()=>{const _=w(N());return be(_,L)?(L.data=_.data,L.isLoading=_.isLoading,L.isValidating=_.isValidating,L.error=_.error,L):(L=_,_)},()=>Q]},[r,a]),J=Et.useSyncExternalStore(l.useCallback(g=>$(a,(w,j)=>{be(j,w)||g()}),[r,a]),Ie[0],Ie[1]),Ne=!X.current,nt=h[a]&&h[a].length>0,K=J.data,z=u(K)?oe&&Qe(oe)?ve(oe):oe:K,ie=J.error,le=l.useRef(z),ae=f?u(K)?u(le.current)?z:le.current:K:z,Ae=nt&&!u(ie)?!1:Ne&&!u(p)?p:v().isPaused()?!1:s?u(z)?!1:m:u(z)||m,We=!!(a&&t&&Ne&&Ae),rt=u(J.isValidating)?We:J.isValidating,st=u(J.isLoading)?We:J.isLoading,ee=l.useCallback(async g=>{const w=D.current;if(!a||!w||F.current||v().isPaused())return!1;let j,S,I=!0;const Q=g||{},L=!d[a]||!Q.dedupe,_=()=>He?!F.current&&a===k.current&&X.current:a===k.current,W={isValidating:!1,isLoading:!1},Me=()=>{Z(W)},Fe=()=>{const T=d[a];T&&T[1]===S&&delete d[a]},Pe={isValidating:!0};u(N().data)&&(Pe.isLoading=!0);try{if(L&&(Z(Pe),n.loadingTimeout&&u(N().data)&&setTimeout(()=>{I&&_()&&v().onLoadingSlow(a,n)},n.loadingTimeout),d[a]=[w(se),_e()]),[j,S]=d[a],j=await j,L&&setTimeout(Fe,n.dedupingInterval),!d[a]||d[a][1]!==S)return L&&_()&&v().onDiscarded(a),!1;W.error=x;const T=O[a];if(!u(T)&&(S<=T[0]||S<=T[1]||T[1]===0))return Me(),L&&_()&&v().onDiscarded(a),!1;const V=N().data;W.data=o(V,j)?V:j,L&&_()&&v().onSuccess(j,a,n)}catch(T){Fe();const V=v(),{shouldRetryOnError:de}=V;V.isPaused()||(W.error=T,L&&_()&&(V.onError(T,a,V),(de===!0||A(de)&&de(T))&&(!v().revalidateOnFocus||!v().revalidateOnReconnect||B())&&V.onErrorRetry(T,a,V,ot=>{const fe=h[a];fe&&fe[0]&&fe[0]($e,ot)},{retryCount:(Q.retryCount||0)+1,dedupe:!0})))}return I=!1,Me(),!0},[a,r]),Ve=l.useCallback((...g)=>Xe(r,k.current,...g),[]);if(we(()=>{D.current=t,H.current=n,u(K)||(le.current=K)}),we(()=>{if(!a)return;const g=ee.bind(x,Re);let w=0;v().revalidateOnFocus&&(w=Date.now()+v().focusThrottleInterval);const S=Ht(a,h,(I,Q={})=>{if(I==Ge){const L=Date.now();v().revalidateOnFocus&&L>w&&B()&&(w=L+v().focusThrottleInterval,g())}else if(I==Je)v().revalidateOnReconnect&&B()&&g();else{if(I==Ke)return ee();if(I==$e)return ee(Q)}});return F.current=!1,k.current=a,X.current=!0,Z({_k:se}),Ae&&(u(z)||ne?g():jt(g)),()=>{F.current=!0,S()}},[a]),we(()=>{let g;function w(){const S=A(y)?y(N().data):y;S&&g!==-1&&(g=setTimeout(j,S))}function j(){!N().error&&(C||v().isVisible())&&(c||v().isOnline())?ee(Re).then(w):w()}return w(),()=>{g&&(clearTimeout(g),g=-1)}},[y,C,c,a]),l.useDebugValue(ae),s&&u(z)&&a){if(!He&&ne)throw new Error("Fallback data is required when using Suspense in SSR.");D.current=t,H.current=n,F.current=!1;const g=U[a];if(!u(g)){const w=Ve(g);ve(w)}if(u(ie)){const w=ee(Re);u(ae)||(w.status="fulfilled",w.value=!0),ve(w)}else throw ie}return{mutate:Ve,get data(){return G.data=!0,ae},get error(){return G.error=!0,ie},get isValidating(){return G.isValidating=!0,rt},get isLoading(){return G.isLoading=!0,st}}},Zt=zt(Bt),Gt=(e,t)=>{const{data:n=[],isLoading:r,error:o}=Zt(e?"zip-data":null,ht);return{results:mt(n,t),isLoading:r,error:o}},Qt=({onSelect:e,isDismissing:t,onExit:n})=>{const[r,o]=l.useState(!1),[s,i]=l.useState(""),{results:p,isLoading:m,error:y}=Gt(r,s),C=()=>{n(),o(!1),i("")},c=s.trim().length>0,f=c&&m,h=c&&!!y,O=c&&!m&&!y&&p.length===0;return E.jsxs("div",{className:te(R.floatingWidget,R.widgetPosition,t&&R.floatingWidgetDismissing),children:[E.jsxs("button",{className:te(R.widgetPill,R.widgetLauncher,r&&R.widgetLauncherHidden),onClick:()=>o(!0),children:[E.jsx("span",{children:Y.widget.launcher}),E.jsx(at,{width:24,height:24})]}),r&&E.jsxs("div",{className:te(R.widgetPanel,R.widgetPanelOpen),children:[E.jsx("button",{className:R.widgetClose,onClick:C,children:E.jsx(ct,{width:16,height:16})}),E.jsx("span",{className:R.widgetHeader,children:Y.widget.header}),E.jsxs("div",{className:R.widgetInputRow,children:[E.jsxs("div",{className:R.widgetInputWrapper,children:[E.jsx("input",{autoFocus:!0,className:R.widgetInput,placeholder:Y.widget.placeholder,value:s,onChange:d=>i(d.target.value)}),f&&E.jsx(dt,{className:R.inputSpinner}),E.jsx("div",{className:te(R.widgetResults,c&&R.widgetResultsVisible),children:c&&E.jsxs(E.Fragment,{children:[O&&E.jsx("div",{className:R.widgetEmpty,children:E.jsx("p",{children:Y.widget.empty})}),h&&E.jsx("div",{className:R.widgetEmpty,children:E.jsx("p",{children:Y.widget.error})}),p.length>0&&E.jsx("ul",{className:R.widgetList,children:p.map(d=>E.jsx("li",{className:R.widgetItem,children:E.jsx("button",{onClick:()=>e(d.zip),className:R.widgetItemButton,children:E.jsx("span",{children:d.label})})},d.id))})]})})]}),E.jsx("button",{className:R.widgetButton,children:Y.widget.buttonLabel})]})]})]})};export{Qt as default};
