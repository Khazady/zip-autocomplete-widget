import{r as d,j as E,a as oe,R as jt,d as Y}from"./index-BP7RU9ti.js";const ie=t=>d.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},d.createElement("path",{d:"M21 8H3",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),d.createElement("path",{d:"M17.5 13a4.5 4.5 0 1 1 0 9 4.5 4.5 0 0 1 0-9",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),d.createElement("path",{d:"M14.67 21H6a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v8.67",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),d.createElement("path",{d:"M17.4 15.98v1.76l1.38.85",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),d.createElement("path",{d:"M13.75 11.45a.05.05 0 1 0 0 .1.05.05 0 0 0 0-.1",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),d.createElement("path",{d:"M10.25 11.45a.1.1 0 0 0-.05.05.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),d.createElement("path",{d:"M6.75 11.45a.1.1 0 0 0-.05.05.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),d.createElement("path",{d:"M10.25 14.45a.1.1 0 0 0-.05.05.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),d.createElement("path",{d:"M6.75 14.45a.1.1 0 0 0-.05.05.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),d.createElement("path",{d:"M10.25 17.45q-.02 0-.04.02l-.01.03a.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),d.createElement("path",{d:"M6.75 17.45a.1.1 0 0 0-.05.05.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"})),ae=t=>d.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},d.createElement("path",{d:"m4.45 4.45 7.07 7.07",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),d.createElement("path",{d:"m11.52 4.45-7.07 7.07",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"})),ce="_floatingWidget_tktp9_1",ue="_widgetLauncher_tktp9_8",le="_widgetPanel_tktp9_24",de="_widgetClose_tktp9_35",fe="_widgetHeader_tktp9_45",pe="_widgetInputRow_tktp9_51",he="_widgetInputWrapper_tktp9_57",we="_widgetInput_tktp9_51",ge="_inputSpinner_tktp9_77",me="_widgetButton_tktp9_88",Ee="_widgetResults_tktp9_98",_e="_widgetList_tktp9_113",Re="_widgetItemButton_tktp9_122",ve="_widgetEmpty_tktp9_135",y={floatingWidget:ce,widgetLauncher:ue,widgetPanel:le,widgetClose:de,widgetHeader:fe,widgetInputRow:pe,widgetInputWrapper:he,widgetInput:we,inputSpinner:ge,widgetButton:me,widgetResults:Ee,widgetList:_e,widgetItemButton:Re,widgetEmpty:ve},Se="_spinner_1l9n9_1",Le={spinner:Se},ke=(...t)=>t.filter(Boolean).join(" "),Ce=({className:t})=>E.jsx("span",{className:ke(Le.spinner,t)}),ye="/zip-autocomplete-widget/mocked-data.json",Oe=async()=>{await new Promise(e=>{setTimeout(e,600)});const t=await fetch(ye);if(!t.ok)throw new Error("Failed to fetch zip data");return await t.json()},je=t=>t.trim().toLowerCase(),Ie=(t,e)=>{const n=je(e);return n?t.filter(o=>{const s=o.zip.startsWith(n),i=o.city.toLowerCase().includes(n);return s||i}).slice(0,6).map((o,s)=>({...o,id:`${o.zip}-${o.city}-${s}`,label:o.hideCityName?o.zip:`${o.zip} ${o.city}`})):[]};var ft={exports:{}},pt={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pt;function xe(){if(Pt)return pt;Pt=1;var t=oe();function e(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,o=t.useEffect,s=t.useLayoutEffect,i=t.useDebugValue;function p(c,f){var u=f(),I=r({inst:{value:u,getSnapshot:f}}),h=I[0].inst,U=I[1];return s(function(){h.value=u,h.getSnapshot=f,g(h)&&U({inst:h})},[c,u,f]),o(function(){return g(h)&&U({inst:h}),c(function(){g(h)&&U({inst:h})})},[c]),i(u),u}function g(c){var f=c.getSnapshot;c=c.value;try{var u=f();return!n(c,u)}catch{return!0}}function S(c,f){return f()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?S:p;return pt.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:v,pt}var qt;function Te(){return qt||(qt=1,ft.exports=xe()),ft.exports}var De=Te();const Zt=0,Gt=1,Jt=2,Ut=3;var Bt=Object.prototype.hasOwnProperty;function Rt(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&Rt(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(Bt.call(t,n)&&++r&&!Bt.call(e,n)||!(n in e)||!Rt(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const M=new WeakMap,P=()=>{},j=P(),vt=Object,l=t=>t===j,W=t=>typeof t=="function",q=(t,e)=>({...t,...e}),Kt=t=>W(t.then),ht={},at={},It="undefined",nt=typeof window!=It,St=typeof document!=It,be=nt&&"Deno"in window,Ne=()=>nt&&typeof window.requestAnimationFrame!=It,Qt=(t,e)=>{const n=M.get(t);return[()=>!l(e)&&t.get(e)||ht,r=>{if(!l(e)){const o=t.get(e);e in at||(at[e]=o),n[5](e,q(o,r),o||ht)}},n[6],()=>!l(e)&&e in at?at[e]:!l(e)&&t.get(e)||ht]};let Lt=!0;const We=()=>Lt,[kt,Ct]=nt&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[P,P],Ae=()=>{const t=St&&document.visibilityState;return l(t)||t!=="hidden"},Ve=t=>(St&&document.addEventListener("visibilitychange",t),kt("focus",t),()=>{St&&document.removeEventListener("visibilitychange",t),Ct("focus",t)}),Me=t=>{const e=()=>{Lt=!0,t()},n=()=>{Lt=!1};return kt("online",e),kt("offline",n),()=>{Ct("online",e),Ct("offline",n)}},Fe={isOnline:We,isVisible:Ae},Pe={initFocus:Ve,initReconnect:Me},Ht=!jt.useId,et=!nt||be,qe=t=>Ne()?window.requestAnimationFrame(t):setTimeout(t,1),wt=et?d.useEffect:d.useLayoutEffect,gt=typeof navigator<"u"&&navigator.connection,$t=!et&&gt&&(["slow-2g","2g"].includes(gt.effectiveType)||gt.saveData),ct=new WeakMap,mt=(t,e)=>vt.prototype.toString.call(t)===`[object ${e}]`;let Ue=0;const yt=t=>{const e=typeof t,n=mt(t,"Date"),r=mt(t,"RegExp"),o=mt(t,"Object");let s,i;if(vt(t)===t&&!n&&!r){if(s=ct.get(t),s)return s;if(s=++Ue+"~",ct.set(t,s),Array.isArray(t)){for(s="@",i=0;i<t.length;i++)s+=yt(t[i])+",";ct.set(t,s)}if(o){s="#";const p=vt.keys(t).sort();for(;!l(i=p.pop());)l(t[i])||(s+=i+":"+yt(t[i])+",");ct.set(t,s)}}else s=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return s},xt=t=>{if(W(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?yt(t):"",[t,e]};let Be=0;const Ot=()=>++Be;async function Yt(...t){const[e,n,r,o]=t,s=q({populateCache:!0,throwOnError:!0},typeof o=="boolean"?{revalidate:o}:o||{});let i=s.populateCache;const p=s.rollbackOnError;let g=s.optimisticData;const S=f=>typeof p=="function"?p(f):p!==!1,v=s.throwOnError;if(W(n)){const f=n,u=[],I=e.keys();for(const h of I)!/^\$(inf|sub)\$/.test(h)&&f(e.get(h)._k)&&u.push(h);return Promise.all(u.map(c))}return c(n);async function c(f){const[u]=xt(f);if(!u)return;const[I,h]=Qt(e,u),[U,a,rt,X]=M.get(e),F=()=>{const D=U[u];return(W(s.revalidate)?s.revalidate(I().data,f):s.revalidate!==!1)&&(delete rt[u],delete X[u],D&&D[0])?D[0](Jt).then(()=>I().data):I().data};if(t.length<3)return F();let k=r,x;const $=Ot();a[u]=[$,0];const _=!l(g),z=I(),N=z.data,Z=z._c,B=l(Z)?N:Z;if(_&&(g=W(g)?g(B,N):g,h({data:g,_c:B})),W(k))try{k=k(B)}catch(D){x=D}if(k&&Kt(k))if(k=await k.catch(D=>{x=D}),$!==a[u][0]){if(x)throw x;return k}else x&&_&&S(x)&&(i=!0,h({data:B,_c:j}));if(i&&!x)if(W(i)){const D=i(k,B);h({data:D,error:j,_c:j})}else h({data:k,error:j,_c:j});if(a[u][1]=Ot(),Promise.resolve(F()).then(()=>{h({_c:j})}),x){if(v)throw x;return}return k}}const zt=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},He=(t,e)=>{if(!M.has(t)){const n=q(Pe,e),r=Object.create(null),o=Yt.bind(j,t);let s=P;const i=Object.create(null),p=(v,c)=>{const f=i[v]||[];return i[v]=f,f.push(c),()=>f.splice(f.indexOf(c),1)},g=(v,c,f)=>{t.set(v,c);const u=i[v];if(u)for(const I of u)I(c,f)},S=()=>{if(!M.has(t)&&(M.set(t,[r,Object.create(null),Object.create(null),Object.create(null),o,g,p]),!et)){const v=n.initFocus(setTimeout.bind(j,zt.bind(j,r,Zt))),c=n.initReconnect(setTimeout.bind(j,zt.bind(j,r,Gt)));s=()=>{v&&v(),c&&c(),M.delete(t)}}};return S(),[t,o,S,s]}return[t,M.get(t)[4]]},$e=(t,e,n,r,o)=>{const s=n.errorRetryCount,i=o.retryCount,p=~~((Math.random()+.5)*(1<<(i<8?i:8)))*n.errorRetryInterval;!l(s)&&i>s||setTimeout(r,p,o)},ze=Rt,[Xt,Ze]=He(new Map),Ge=q({onLoadingSlow:P,onSuccess:P,onError:P,onErrorRetry:$e,onDiscarded:P,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:$t?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:$t?5e3:3e3,compare:ze,isPaused:()=>!1,cache:Xt,mutate:Ze,fallback:{}},Fe),Je=(t,e)=>{const n=q(t,e);if(e){const{use:r,fallback:o}=t,{use:s,fallback:i}=e;r&&s&&(n.use=r.concat(s)),o&&i&&(n.fallback=q(o,i))}return n},Ke=d.createContext({}),Qe="$inf$",te=nt&&window.__SWR_DEVTOOLS_USE__,Ye=te?window.__SWR_DEVTOOLS_USE__:[],Xe=()=>{te&&(window.__SWR_DEVTOOLS_REACT__=jt)},tn=t=>W(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],en=()=>q(Ge,d.useContext(Ke)),nn=t=>(e,n,r)=>t(e,n&&((...s)=>{const[i]=xt(e),[,,,p]=M.get(Xt);if(i.startsWith(Qe))return n(...s);const g=p[i];return l(g)?n(...s):(delete p[i],g)}),r),rn=Ye.concat(nn),sn=t=>function(...n){const r=en(),[o,s,i]=tn(n),p=Je(r,i);let g=t;const{use:S}=p,v=(S||[]).concat(rn);for(let c=v.length;c--;)g=v[c](g);return g(o,s||p.fetcher||null,p)},on=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o>=0&&(r[o]=r[r.length-1],r.pop())}};Xe();const Et=jt.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),_t={dedupe:!0},an=(t,e,n)=>{const{cache:r,compare:o,suspense:s,fallbackData:i,revalidateOnMount:p,revalidateIfStale:g,refreshInterval:S,refreshWhenHidden:v,refreshWhenOffline:c,keepPreviousData:f}=n,[u,I,h,U]=M.get(r),[a,rt]=xt(t),X=d.useRef(!1),F=d.useRef(!1),k=d.useRef(a),x=d.useRef(e),$=d.useRef(n),_=()=>$.current,z=()=>_().isVisible()&&_().isOnline(),[N,Z,B,D]=Qt(r,a),G=d.useRef({}).current,st=l(i)?l(n.fallback)?j:n.fallback[a]:i,Tt=(m,w)=>{for(const C in G){const R=C;if(R==="data"){if(!o(m[R],w[R])&&(!l(m[R])||!o(it,w[R])))return!1}else if(w[R]!==m[R])return!1}return!0},Dt=d.useMemo(()=>{const m=!a||!e?!1:l(p)?_().isPaused()||s?!1:g!==!1:p,w=O=>{const A=q(O);return delete A._k,m?{isValidating:!0,isLoading:!0,...A}:A},C=N(),R=D(),b=w(C),Q=C===R?b:w(R);let L=b;return[()=>{const O=w(N());return Tt(O,L)?(L.data=O.data,L.isLoading=O.isLoading,L.isValidating=O.isValidating,L.error=O.error,L):(L=O,O)},()=>Q]},[r,a]),J=De.useSyncExternalStore(d.useCallback(m=>B(a,(w,C)=>{Tt(C,w)||m()}),[r,a]),Dt[0],Dt[1]),bt=!X.current,ee=u[a]&&u[a].length>0,K=J.data,H=l(K)?st&&Kt(st)?Et(st):st:K,ot=J.error,ut=d.useRef(H),it=f?l(K)?l(ut.current)?H:ut.current:K:H,Nt=ee&&!l(ot)?!1:bt&&!l(p)?p:_().isPaused()?!1:s?l(H)?!1:g:l(H)||g,Wt=!!(a&&e&&bt&&Nt),ne=l(J.isValidating)?Wt:J.isValidating,re=l(J.isLoading)?Wt:J.isLoading,tt=d.useCallback(async m=>{const w=x.current;if(!a||!w||F.current||_().isPaused())return!1;let C,R,b=!0;const Q=m||{},L=!h[a]||!Q.dedupe,O=()=>Ht?!F.current&&a===k.current&&X.current:a===k.current,A={isValidating:!1,isLoading:!1},Vt=()=>{Z(A)},Mt=()=>{const T=h[a];T&&T[1]===R&&delete h[a]},Ft={isValidating:!0};l(N().data)&&(Ft.isLoading=!0);try{if(L&&(Z(Ft),n.loadingTimeout&&l(N().data)&&setTimeout(()=>{b&&O()&&_().onLoadingSlow(a,n)},n.loadingTimeout),h[a]=[w(rt),Ot()]),[C,R]=h[a],C=await C,L&&setTimeout(Mt,n.dedupingInterval),!h[a]||h[a][1]!==R)return L&&O()&&_().onDiscarded(a),!1;A.error=j;const T=I[a];if(!l(T)&&(R<=T[0]||R<=T[1]||T[1]===0))return Vt(),L&&O()&&_().onDiscarded(a),!1;const V=N().data;A.data=o(V,C)?V:C,L&&O()&&_().onSuccess(C,a,n)}catch(T){Mt();const V=_(),{shouldRetryOnError:lt}=V;V.isPaused()||(A.error=T,L&&O()&&(V.onError(T,a,V),(lt===!0||W(lt)&&lt(T))&&(!_().revalidateOnFocus||!_().revalidateOnReconnect||z())&&V.onErrorRetry(T,a,V,se=>{const dt=u[a];dt&&dt[0]&&dt[0](Ut,se)},{retryCount:(Q.retryCount||0)+1,dedupe:!0})))}return b=!1,Vt(),!0},[a,r]),At=d.useCallback((...m)=>Yt(r,k.current,...m),[]);if(wt(()=>{x.current=e,$.current=n,l(K)||(ut.current=K)}),wt(()=>{if(!a)return;const m=tt.bind(j,_t);let w=0;_().revalidateOnFocus&&(w=Date.now()+_().focusThrottleInterval);const R=on(a,u,(b,Q={})=>{if(b==Zt){const L=Date.now();_().revalidateOnFocus&&L>w&&z()&&(w=L+_().focusThrottleInterval,m())}else if(b==Gt)_().revalidateOnReconnect&&z()&&m();else{if(b==Jt)return tt();if(b==Ut)return tt(Q)}});return F.current=!1,k.current=a,X.current=!0,Z({_k:rt}),Nt&&(l(H)||et?m():qe(m)),()=>{F.current=!0,R()}},[a]),wt(()=>{let m;function w(){const R=W(S)?S(N().data):S;R&&m!==-1&&(m=setTimeout(C,R))}function C(){!N().error&&(v||_().isVisible())&&(c||_().isOnline())?tt(_t).then(w):w()}return w(),()=>{m&&(clearTimeout(m),m=-1)}},[S,v,c,a]),d.useDebugValue(it),s&&l(H)&&a){if(!Ht&&et)throw new Error("Fallback data is required when using Suspense in SSR.");x.current=e,$.current=n,F.current=!1;const m=U[a];if(!l(m)){const w=At(m);Et(w)}if(l(ot)){const w=tt(_t);l(it)||(w.status="fulfilled",w.value=!0),Et(w)}else throw ot}return{mutate:At,get data(){return G.data=!0,it},get error(){return G.error=!0,ot},get isValidating(){return G.isValidating=!0,ne},get isLoading(){return G.isLoading=!0,re}}},cn=sn(an),un=(t,e)=>{const{data:n=[],isLoading:r,error:o}=cn(t?"zip-data":null,Oe);return{results:Ie(n,e),isLoading:r,error:o}},fn=({onSelect:t})=>{const[e,n]=d.useState(!1),[r,o]=d.useState(""),{results:s,isLoading:i,error:p}=un(e,r),g=()=>{n(!1),o("")},S=r.trim().length>0,v=S&&i,c=S&&!!p,f=S&&!i&&!p&&s.length===0;return E.jsxs("div",{className:y.floatingWidget,children:[!e&&E.jsxs("button",{className:y.widgetLauncher,onClick:()=>n(!0),children:[E.jsx("span",{children:Y.widget.launcher}),E.jsx(ie,{width:24,height:24})]}),e&&E.jsxs("div",{className:y.widgetPanel,children:[E.jsx("button",{className:y.widgetClose,onClick:g,children:E.jsx(ae,{width:16,height:16})}),E.jsx("span",{className:y.widgetHeader,children:Y.widget.header}),E.jsxs("div",{className:y.widgetInputRow,children:[E.jsxs("div",{className:y.widgetInputWrapper,children:[E.jsx("input",{autoFocus:!0,className:y.widgetInput,placeholder:Y.widget.placeholder,value:r,onChange:u=>o(u.target.value)}),v&&E.jsx(Ce,{className:y.inputSpinner}),S&&E.jsxs("div",{className:y.widgetResults,children:[f&&E.jsx("div",{className:y.widgetEmpty,children:E.jsx("p",{children:Y.widget.empty})}),c&&E.jsx("div",{className:y.widgetEmpty,children:E.jsx("p",{children:Y.widget.error})}),s.length>0&&E.jsx("ul",{className:y.widgetList,children:s.map(u=>E.jsx("li",{className:y.widgetItem,children:E.jsx("button",{onClick:()=>t(u.zip),className:y.widgetItemButton,children:E.jsx("span",{children:u.label})})},u.id))})]})]}),E.jsx("button",{className:y.widgetButton,children:Y.widget.buttonLabel})]})]})]})};export{fn as default};
