import{r as l,j as E,c as et,a as ie,R as xt,d as Y,s as R}from"./index-rkeVXx8S.js";const ae=t=>l.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},l.createElement("path",{d:"M21 8H3",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M17.5 13a4.5 4.5 0 1 1 0 9 4.5 4.5 0 0 1 0-9",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M14.67 21H6a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v8.67",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M17.4 15.98v1.76l1.38.85",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M13.75 11.45a.05.05 0 1 0 0 .1.05.05 0 0 0 0-.1",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M10.25 11.45a.1.1 0 0 0-.05.05.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M6.75 11.45a.1.1 0 0 0-.05.05.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M10.25 14.45a.1.1 0 0 0-.05.05.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M6.75 14.45a.1.1 0 0 0-.05.05.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M10.25 17.45q-.02 0-.04.02l-.01.03a.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M6.75 17.45a.1.1 0 0 0-.05.05.05.05 0 1 0 .05-.05",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"})),ce=t=>l.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},l.createElement("path",{d:"m4.45 4.45 7.07 7.07",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"m11.52 4.45-7.07 7.07",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"})),ue="_spinner_1l9n9_1",le={spinner:ue},de=({className:t})=>E.jsx("span",{className:et(le.spinner,t)}),fe="/zip-autocomplete-widget/mocked-data.json",he=async()=>{await new Promise(e=>{setTimeout(e,1e3)});const t=await fetch(fe);if(!t.ok)throw new Error("Failed to fetch zip data");return await t.json()},pe=t=>t.trim().toLowerCase(),me=(t,e)=>{const n=pe(e);return n?t.filter(o=>{const r=o.zip.startsWith(n),i=o.city.toLowerCase().includes(n);return r||i}).slice(0,6).map((o,r)=>({...o,id:`${o.zip}-${o.city}-${r}`,label:o.hideCityName?o.zip:`${o.zip} ${o.city}`})):[]};var ht={exports:{}},pt={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qt;function ge(){if(qt)return pt;qt=1;var t=ie();function e(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var n=typeof Object.is=="function"?Object.is:e,s=t.useState,o=t.useEffect,r=t.useLayoutEffect,i=t.useDebugValue;function p(c,d){var f=d(),L=s({inst:{value:f,getSnapshot:d}}),h=L[0].inst,D=L[1];return r(function(){h.value=f,h.getSnapshot=d,m(h)&&D({inst:h})},[c,f,d]),o(function(){return m(h)&&D({inst:h}),c(function(){m(h)&&D({inst:h})})},[c]),i(f),f}function m(c){var d=c.getSnapshot;c=c.value;try{var f=d();return!n(c,f)}catch{return!0}}function O(c,d){return d()}var C=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?O:p;return pt.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:C,pt}var Ut;function we(){return Ut||(Ut=1,ht.exports=ge()),ht.exports}var Ee=we();const Gt=0,Jt=1,Kt=2,$t=3;var zt=Object.prototype.hasOwnProperty;function St(t,e){var n,s;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((s=t.length)===e.length)for(;s--&&St(t[s],e[s]););return s===-1}if(!n||typeof t=="object"){s=0;for(n in t)if(zt.call(t,n)&&++s&&!zt.call(e,n)||!(n in e)||!St(t[n],e[n]))return!1;return Object.keys(e).length===s}}return t!==t&&e!==e}const F=new WeakMap,q=()=>{},x=q(),Ct=Object,u=t=>t===x,W=t=>typeof t=="function",U=(t,e)=>({...t,...e}),Qt=t=>W(t.then),mt={},ct={},Dt="undefined",st=typeof window!=Dt,Lt=typeof document!=Dt,ve=st&&"Deno"in window,Re=()=>st&&typeof window.requestAnimationFrame!=Dt,Yt=(t,e)=>{const n=F.get(t);return[()=>!u(e)&&t.get(e)||mt,s=>{if(!u(e)){const o=t.get(e);e in ct||(ct[e]=o),n[5](e,U(o,s),o||mt)}},n[6],()=>!u(e)&&e in ct?ct[e]:!u(e)&&t.get(e)||mt]};let yt=!0;const Se=()=>yt,[Ot,kt]=st&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[q,q],Ce=()=>{const t=Lt&&document.visibilityState;return u(t)||t!=="hidden"},Le=t=>(Lt&&document.addEventListener("visibilitychange",t),Ot("focus",t),()=>{Lt&&document.removeEventListener("visibilitychange",t),kt("focus",t)}),ye=t=>{const e=()=>{yt=!0,t()},n=()=>{yt=!1};return Ot("online",e),Ot("offline",n),()=>{kt("online",e),kt("offline",n)}},Oe={isOnline:Se,isVisible:Ce},ke={initFocus:Le,initReconnect:ye},Ht=!xt.useId,nt=!st||ve,je=t=>Re()?window.requestAnimationFrame(t):setTimeout(t,1),gt=nt?l.useEffect:l.useLayoutEffect,wt=typeof navigator<"u"&&navigator.connection,Bt=!nt&&wt&&(["slow-2g","2g"].includes(wt.effectiveType)||wt.saveData),ut=new WeakMap,Et=(t,e)=>Ct.prototype.toString.call(t)===`[object ${e}]`;let _e=0;const jt=t=>{const e=typeof t,n=Et(t,"Date"),s=Et(t,"RegExp"),o=Et(t,"Object");let r,i;if(Ct(t)===t&&!n&&!s){if(r=ut.get(t),r)return r;if(r=++_e+"~",ut.set(t,r),Array.isArray(t)){for(r="@",i=0;i<t.length;i++)r+=jt(t[i])+",";ut.set(t,r)}if(o){r="#";const p=Ct.keys(t).sort();for(;!u(i=p.pop());)u(t[i])||(r+=i+":"+jt(t[i])+",");ut.set(t,r)}}else r=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return r},Tt=t=>{if(W(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?jt(t):"",[t,e]};let xe=0;const _t=()=>++xe;async function Xt(...t){const[e,n,s,o]=t,r=U({populateCache:!0,throwOnError:!0},typeof o=="boolean"?{revalidate:o}:o||{});let i=r.populateCache;const p=r.rollbackOnError;let m=r.optimisticData;const O=d=>typeof p=="function"?p(d):p!==!1,C=r.throwOnError;if(W(n)){const d=n,f=[],L=e.keys();for(const h of L)!/^\$(inf|sub)\$/.test(h)&&d(e.get(h)._k)&&f.push(h);return Promise.all(f.map(c))}return c(n);async function c(d){const[f]=Tt(d);if(!f)return;const[L,h]=Yt(e,f),[D,a,rt,X]=F.get(e),P=()=>{const I=D[f];return(W(r.revalidate)?r.revalidate(L().data,d):r.revalidate!==!1)&&(delete rt[f],delete X[f],I&&I[0])?I[0](Kt).then(()=>L().data):L().data};if(t.length<3)return P();let k=s,T;const H=_t();a[f]=[H,0];const v=!u(m),B=L(),A=B.data,Z=B._c,$=u(Z)?A:Z;if(v&&(m=W(m)?m($,A):m,h({data:m,_c:$})),W(k))try{k=k($)}catch(I){T=I}if(k&&Qt(k))if(k=await k.catch(I=>{T=I}),H!==a[f][0]){if(T)throw T;return k}else T&&v&&O(T)&&(i=!0,h({data:$,_c:x}));if(i&&!T)if(W(i)){const I=i(k,$);h({data:I,error:x,_c:x})}else h({data:k,error:x,_c:x});if(a[f][1]=_t(),Promise.resolve(P()).then(()=>{h({_c:x})}),T){if(C)throw T;return}return k}}const Zt=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},De=(t,e)=>{if(!F.has(t)){const n=U(ke,e),s=Object.create(null),o=Xt.bind(x,t);let r=q;const i=Object.create(null),p=(C,c)=>{const d=i[C]||[];return i[C]=d,d.push(c),()=>d.splice(d.indexOf(c),1)},m=(C,c,d)=>{t.set(C,c);const f=i[C];if(f)for(const L of f)L(c,d)},O=()=>{if(!F.has(t)&&(F.set(t,[s,Object.create(null),Object.create(null),Object.create(null),o,m,p]),!nt)){const C=n.initFocus(setTimeout.bind(x,Zt.bind(x,s,Gt))),c=n.initReconnect(setTimeout.bind(x,Zt.bind(x,s,Jt)));r=()=>{C&&C(),c&&c(),F.delete(t)}}};return O(),[t,o,O,r]}return[t,F.get(t)[4]]},Te=(t,e,n,s,o)=>{const r=n.errorRetryCount,i=o.retryCount,p=~~((Math.random()+.5)*(1<<(i<8?i:8)))*n.errorRetryInterval;!u(r)&&i>r||setTimeout(s,p,o)},be=St,[te,Ie]=De(new Map),Ne=U({onLoadingSlow:q,onSuccess:q,onError:q,onErrorRetry:Te,onDiscarded:q,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Bt?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Bt?5e3:3e3,compare:be,isPaused:()=>!1,cache:te,mutate:Ie,fallback:{}},Oe),Ae=(t,e)=>{const n=U(t,e);if(e){const{use:s,fallback:o}=t,{use:r,fallback:i}=e;s&&r&&(n.use=s.concat(r)),o&&i&&(n.fallback=U(o,i))}return n},We=l.createContext({}),Ve="$inf$",ee=st&&window.__SWR_DEVTOOLS_USE__,Me=ee?window.__SWR_DEVTOOLS_USE__:[],Fe=()=>{ee&&(window.__SWR_DEVTOOLS_REACT__=xt)},Pe=t=>W(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],qe=()=>U(Ne,l.useContext(We)),Ue=t=>(e,n,s)=>t(e,n&&((...r)=>{const[i]=Tt(e),[,,,p]=F.get(te);if(i.startsWith(Ve))return n(...r);const m=p[i];return u(m)?n(...r):(delete p[i],m)}),s),$e=Me.concat(Ue),ze=t=>function(...n){const s=qe(),[o,r,i]=Pe(n),p=Ae(s,i);let m=t;const{use:O}=p,C=(O||[]).concat($e);for(let c=C.length;c--;)m=C[c](m);return m(o,r||p.fetcher||null,p)},He=(t,e,n)=>{const s=e[t]||(e[t]=[]);return s.push(n),()=>{const o=s.indexOf(n);o>=0&&(s[o]=s[s.length-1],s.pop())}};Fe();const vt=xt.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),Rt={dedupe:!0},Be=(t,e,n)=>{const{cache:s,compare:o,suspense:r,fallbackData:i,revalidateOnMount:p,revalidateIfStale:m,refreshInterval:O,refreshWhenHidden:C,refreshWhenOffline:c,keepPreviousData:d}=n,[f,L,h,D]=F.get(s),[a,rt]=Tt(t),X=l.useRef(!1),P=l.useRef(!1),k=l.useRef(a),T=l.useRef(e),H=l.useRef(n),v=()=>H.current,B=()=>v().isVisible()&&v().isOnline(),[A,Z,$,I]=Yt(s,a),G=l.useRef({}).current,ot=u(i)?u(n.fallback)?x:n.fallback[a]:i,bt=(w,g)=>{for(const j in G){const S=j;if(S==="data"){if(!o(w[S],g[S])&&(!u(w[S])||!o(at,g[S])))return!1}else if(g[S]!==w[S])return!1}return!0},It=l.useMemo(()=>{const w=!a||!e?!1:u(p)?v().isPaused()||r?!1:m!==!1:p,g=_=>{const V=U(_);return delete V._k,w?{isValidating:!0,isLoading:!0,...V}:V},j=A(),S=I(),N=g(j),Q=j===S?N:g(S);let y=N;return[()=>{const _=g(A());return bt(_,y)?(y.data=_.data,y.isLoading=_.isLoading,y.isValidating=_.isValidating,y.error=_.error,y):(y=_,_)},()=>Q]},[s,a]),J=Ee.useSyncExternalStore(l.useCallback(w=>$(a,(g,j)=>{bt(j,g)||w()}),[s,a]),It[0],It[1]),Nt=!X.current,ne=f[a]&&f[a].length>0,K=J.data,z=u(K)?ot&&Qt(ot)?vt(ot):ot:K,it=J.error,lt=l.useRef(z),at=d?u(K)?u(lt.current)?z:lt.current:K:z,At=ne&&!u(it)?!1:Nt&&!u(p)?p:v().isPaused()?!1:r?u(z)?!1:m:u(z)||m,Wt=!!(a&&e&&Nt&&At),se=u(J.isValidating)?Wt:J.isValidating,re=u(J.isLoading)?Wt:J.isLoading,tt=l.useCallback(async w=>{const g=T.current;if(!a||!g||P.current||v().isPaused())return!1;let j,S,N=!0;const Q=w||{},y=!h[a]||!Q.dedupe,_=()=>Ht?!P.current&&a===k.current&&X.current:a===k.current,V={isValidating:!1,isLoading:!1},Mt=()=>{Z(V)},Ft=()=>{const b=h[a];b&&b[1]===S&&delete h[a]},Pt={isValidating:!0};u(A().data)&&(Pt.isLoading=!0);try{if(y&&(Z(Pt),n.loadingTimeout&&u(A().data)&&setTimeout(()=>{N&&_()&&v().onLoadingSlow(a,n)},n.loadingTimeout),h[a]=[g(rt),_t()]),[j,S]=h[a],j=await j,y&&setTimeout(Ft,n.dedupingInterval),!h[a]||h[a][1]!==S)return y&&_()&&v().onDiscarded(a),!1;V.error=x;const b=L[a];if(!u(b)&&(S<=b[0]||S<=b[1]||b[1]===0))return Mt(),y&&_()&&v().onDiscarded(a),!1;const M=A().data;V.data=o(M,j)?M:j,y&&_()&&v().onSuccess(j,a,n)}catch(b){Ft();const M=v(),{shouldRetryOnError:dt}=M;M.isPaused()||(V.error=b,y&&_()&&(M.onError(b,a,M),(dt===!0||W(dt)&&dt(b))&&(!v().revalidateOnFocus||!v().revalidateOnReconnect||B())&&M.onErrorRetry(b,a,M,oe=>{const ft=f[a];ft&&ft[0]&&ft[0]($t,oe)},{retryCount:(Q.retryCount||0)+1,dedupe:!0})))}return N=!1,Mt(),!0},[a,s]),Vt=l.useCallback((...w)=>Xt(s,k.current,...w),[]);if(gt(()=>{T.current=e,H.current=n,u(K)||(lt.current=K)}),gt(()=>{if(!a)return;const w=tt.bind(x,Rt);let g=0;v().revalidateOnFocus&&(g=Date.now()+v().focusThrottleInterval);const S=He(a,f,(N,Q={})=>{if(N==Gt){const y=Date.now();v().revalidateOnFocus&&y>g&&B()&&(g=y+v().focusThrottleInterval,w())}else if(N==Jt)v().revalidateOnReconnect&&B()&&w();else{if(N==Kt)return tt();if(N==$t)return tt(Q)}});return P.current=!1,k.current=a,X.current=!0,Z({_k:rt}),At&&(u(z)||nt?w():je(w)),()=>{P.current=!0,S()}},[a]),gt(()=>{let w;function g(){const S=W(O)?O(A().data):O;S&&w!==-1&&(w=setTimeout(j,S))}function j(){!A().error&&(C||v().isVisible())&&(c||v().isOnline())?tt(Rt).then(g):g()}return g(),()=>{w&&(clearTimeout(w),w=-1)}},[O,C,c,a]),l.useDebugValue(at),r&&u(z)&&a){if(!Ht&&nt)throw new Error("Fallback data is required when using Suspense in SSR.");T.current=e,H.current=n,P.current=!1;const w=D[a];if(!u(w)){const g=Vt(w);vt(g)}if(u(it)){const g=tt(Rt);u(at)||(g.status="fulfilled",g.value=!0),vt(g)}else throw it}return{mutate:Vt,get data(){return G.data=!0,at},get error(){return G.error=!0,it},get isValidating(){return G.isValidating=!0,se},get isLoading(){return G.isLoading=!0,re}}},Ze=ze(Be),Ge=(t,e)=>{const{data:n=[],isLoading:s,error:o}=Ze(t?"zip-data":null,he);return{results:me(n,e),isLoading:s,error:o}},Qe=({onSelect:t,isDismissing:e,onExit:n})=>{const[s,o]=l.useState(!1),[r,i]=l.useState(""),{results:p,isLoading:m,error:O}=Ge(s,r),C=()=>{n(),o(!1),i("")},c=r.trim().length>0,d=c&&m,f=c&&!!O,L=c&&!m&&!O&&p.length===0,h=L||f||p.length>0;return E.jsxs("div",{className:et(R.floatingWidget,R.widgetPosition,e&&R.floatingWidgetDismissing),children:[E.jsxs("button",{className:et(R.widgetPill,R.widgetLauncher,s&&R.widgetLauncherHidden),onClick:()=>o(!0),children:[E.jsx("span",{children:Y.widget.launcher}),E.jsx(ae,{width:24,height:24})]}),s&&E.jsxs("div",{className:et(R.widgetPanel,R.widgetPanelOpen),children:[E.jsx("button",{className:R.widgetClose,onClick:C,children:E.jsx(ce,{width:16,height:16})}),E.jsx("span",{className:R.widgetHeader,children:Y.widget.header}),E.jsxs("div",{className:R.widgetInputRow,children:[E.jsxs("div",{className:R.widgetInputWrapper,children:[E.jsx("input",{autoFocus:!0,className:R.widgetInput,placeholder:Y.widget.placeholder,value:r,onChange:D=>i(D.target.value)}),d&&E.jsx(de,{className:R.inputSpinner}),E.jsx("div",{className:et(R.widgetResults,h&&R.widgetResultsVisible),children:h&&E.jsxs(E.Fragment,{children:[L&&E.jsx("div",{className:R.widgetEmpty,children:E.jsx("p",{children:Y.widget.empty})}),f&&E.jsx("div",{className:R.widgetEmpty,children:E.jsx("p",{children:Y.widget.error})}),p.length>0&&E.jsx("ul",{className:R.widgetList,children:p.map(D=>E.jsx("li",{className:R.widgetItem,children:E.jsx("button",{onClick:()=>t(D.zip),className:R.widgetItemButton,children:E.jsx("span",{children:D.label})})},D.id))})]})})]}),E.jsx("button",{className:R.widgetButton,children:Y.widget.buttonLabel})]})]})]})};export{Qe as default};
